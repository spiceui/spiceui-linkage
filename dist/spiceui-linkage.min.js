!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var a in n)("object"==typeof exports?exports:e)[a]=n[a]}}(this,function(){return function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=0)}([function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,n){a(this,e),this.selector=t,this.options=$.extend(!0,{},{type:"date",defaultText:["请选择","请选择","请选择"],linkageData:{},linkageDataStart:"1",btnClass:".spice-btn",dataYear:[1910,2018]},n)}return i(e,[{key:"init",value:function(){var e=this,t=e.selector,n=e.options,a=n.linkageData,i=n.linkageDataStart,r=n.type;if("linkage"==r&&(!n.linkageData||$.isEmptyObject(n.linkageData)))return e;var o=e.isDefault=$("select",t).length>0;return o&&(e.select=$("select",t)),e.select&&0!=e.select.length?($.each(e.select,function(t,n){var o=$(n),l=o.attr("data-spice-curval");o.attr({"data-spice-index":t}).html(function(){return"linkage"==r?e._getOptionHtml(t,0==t?a[i]:{},l):e._getOptionDatehtml(t,l)}),e._activate(o)}),o&&e.select.eq(0).trigger("change.spice.linkage",["default"]),e):e}},{key:"_getOptionHtml",value:function(e,t,n){var a=this,i=a.options,r=i.defaultText,o="";return a.isDefault&&(o=r?'<option value="">'+(r[e]||"")+"</option>":"",$.each(t,function(e,t){o+='<option value="'+e+'" '+(e==n||t==n?"selected":"")+" >"+t+"</option>"})),o}},{key:"_activate",value:function(e){var t=this;t[t.isDefault?"_defaultSelect":"_simulationSelect"](e)}},{key:"_defaultSelect",value:function(e){var t=this,n=t.selector,a=t.options;e.on("change.spice.linkage",function(e,i){var r=$(this),o=r.prev(a.btnClass),l=+r.attr("data-spice-index"),c=$("option:selected",r).attr("value"),u=$("option:selected",r).text();r.removeAttr("data-spice-curval"),0!=o.length&&o.html(u);var s=t.getLinkAgeObj(c),p=$("[data-spice-index="+ ++l+"]",n),f=p.attr("data-spice-curval");if(0==p.length)return n.trigger("spice.linkage.change",{value:t.getSelectVal()}),!1;"linkage"==a.type?p.removeAttr("data-spice-curval").html(t._getOptionHtml(l,s,f)).trigger("change.spice.linkage",[i]):p.removeAttr("data-spice-curval").html(t._getOptionDatehtml(l,f)).trigger("change.spice.linkage",[i])})}},{key:"_simulationSelect",value:function(e){}},{key:"_getDateOptionStr",value:function(e,t,n){if(this.isDefault)return n?e?'<option value="">'+e+"</option>":"":'<option value="'+e+'" '+(t==e?"selected":"")+">"+e+"</option>"}},{key:"_getLeapYear",value:function(e){if(e%100==0){if(e%400==0)return!0}else if(e%4==0)return!0;return!1}},{key:"_getOptionDatehtml",value:function(e,t){var n=this,a=n.options,i=a.defaultText,r=a.dataYear,o=n.isDefault?n.getSelectVal():[],l=+o[0],c=+o[1],u="";if(u=n._getDateOptionStr(i[e]||"",t,!0),0===e&&$.isArray(r)&&2==r.length){var s=r[0],p=r[1],f=p+1;if(s<=p)for(;f-- >s;)u+=n._getDateOptionStr(f,t)}else if(1===e){if(l)for(var g=0;++g<=12;)u+=n._getDateOptionStr(g,t)}else if(2===e){var v=0,d=0;if(l&&c)for(d=2==c?n._getLeapYear(l)?29:28:-1!=$.inArray(c,[1,3,5,7,8,10,12])?31:30;++v<=d;)u+=n._getDateOptionStr(v,t)}return u}},{key:"getLinkAgeObj",value:function(e){var t=this,n=t.options,a=n.linkageData;return e&&!$.isEmptyObject(a[e])?a[e]:{}}},{key:"getSelectVal",value:function(){var e=this,t=e.options,n=e.selector;return $.map($("select",n),function(e){var n=$("option:selected",e);return n.attr("value")+("linkage"==t.type?"-"+n.text():"")})}},{key:"setSelectVal",value:function(e){if(!$.isArray(e)||0==e.length)return!1;var t=this,n=t.select;n.attr("data-spice-curval",function(){return e[$(this).attr("data-spice-index")]}),$("option",n.eq(0)).removeAttr("selected");var a=$("option:contains("+e[0]+")",n.eq(0));0===a.length&&(a=$("option[value="+e[0]+"]",n.eq(0))),a.attr("selected","selected"),n.eq(0).trigger("change.spice.linkage",["default"])}}]),e}();$.spice=$.spice||{},$.spice.Linkage=function(e,t){if(!e||$.isPlainObject(e))return!1;var n={};return $(e).each(function(e,a){var i=$(a),o=i.data("spice.linkage");o||i.data("spice.linkage",o=new r(i,t).init()),n[e]=o}),1==$(e).length&&(n=n[0]),n},e.exports=$.spice.Linkage}])});